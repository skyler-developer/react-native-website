<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-0.70 docs-doc-page docs-doc-id-build-speed" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.2.0">
<title data-rh="true">优化编译速度 · React Native 中文网</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" name="twitter:image" content="https://reactnative.cn/img/logo-og.png"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" property="og:url" content="https://reactnative.cn"><meta data-rh="true" property="og:image" content="img/logo-og.png"><meta data-rh="true" name="docusaurus_version" content="0.70"><meta data-rh="true" name="docusaurus_tag" content="docs-default-0.70"><meta data-rh="true" name="docsearch:version" content="0.70"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-0.70"><meta data-rh="true" property="og:title" content="优化编译速度 · React Native 中文网"><meta data-rh="true" name="description" content="Building your React Native app could be expensive and take several minutes of developers time."><meta data-rh="true" property="og:description" content="Building your React Native app could be expensive and take several minutes of developers time."><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://reactnative.cn/docs/0.70/build-speed"><link data-rh="true" rel="alternate" href="https://reactnative.cn/docs/0.70/build-speed" hreflang="en"><link data-rh="true" rel="alternate" href="https://reactnative.cn/docs/0.70/build-speed" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://GJGDC5L5HP-dsn.algolia.net" crossorigin="anonymous"><link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-63485149-4","auto"),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-63485149-4"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-63485149-4",{})</script>


<link rel="search" type="application/opensearchdescription+xml" title="React Native 中文网" href="/opensearch.xml">


<script src="//snack.expo.dev/embed.js" defer="defer"></script>
<script src="//cdn.wwads.cn/js/makemoney.js" defer="defer"></script><link rel="stylesheet" href="/assets/css/styles.d5201bd3.css">
<script src="/assets/js/runtime~main.64acc9ce.js" defer="defer"></script>
<script src="/assets/js/main.1cb7fbfd.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="跳到主要内容"><a class="skipToContent_oPtH" href="#__docusaurus_skipToContent_fallback">跳到主要内容</a></div><nav aria-label="Main" class="navbar navbar--fixed-top navbar--dark"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/header_logo.svg" alt="React Native 中文网" class="themedComponent_siVc themedComponent--light_hHel"><img src="/img/header_logo.svg" alt="React Native 中文网" class="themedComponent_siVc themedComponent--dark_yETr"></div><b class="navbar__title text--truncate">React Native 中文网</b></a><div class="navbar__item dropdown dropdown--hoverable"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/docs/0.70/getting-started">0.70</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/next/build-speed">Next</a></li><li><a class="dropdown__link" href="/docs/build-speed">0.74</a></li><li><a class="dropdown__link" href="/docs/0.73/build-speed">0.73</a></li><li><a class="dropdown__link" href="/docs/0.72/build-speed">0.72</a></li><li><a class="dropdown__link" href="/docs/0.71/build-speed">0.71</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/0.70/build-speed">0.70</a></li><li><a class="dropdown__link" href="/versions">所有版本</a></li></ul></div></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">开发文档</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/0.70/getting-started">入门指南</a></li><li><a class="dropdown__link" href="/docs/0.70/components-and-apis">组件</a></li><li><a class="dropdown__link" href="/docs/0.70/accessibilityinfo">API</a></li><li><a class="dropdown__link" href="/architecture/overview">架构</a></li></ul></div><a href="//time.geekbang.org/column/intro/100110101?code=FAqHFVRUur%2FgAP-yJQWitk9ieF80imRky3PVsIs%2FX6A%3D" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link hot-link">实战课<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_2l9O"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="//github.com/reactnativecn/react-native-website/issues" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">讨论<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_2l9O"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="//pushy.reactnative.cn" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link hot-link">热更新<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_2l9O"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a class="navbar__item navbar__link" href="/about">关于</a><a href="//github.com/facebook/react-native" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link navbar-github-link" aria-label="GitHub repository"></a><div class="toggle_ki11 colorModeToggle_Hewu"><button class="clean-btn toggleButton_MMFG toggleButtonDisabled_Uw7m darkNavbarColorModeToggle_m8pZ" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_lgto"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_U96C"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_bzqh"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_MB5r"><div class="docsWrapper__sE8"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_iEvu" type="button"></button><div class="docRoot_DfVB"><aside class="theme-doc-sidebar-container docSidebarContainer_c7NB"><div class="sidebarViewport_KYo0"><div class="sidebar_CUen"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_jmj1"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/0.70/getting-started">入门基础</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/0.70/environment-setup">环境搭建</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/0.70/running-on-device">开发流程</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/0.70/style">设计</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/docs/0.70/performance">性能调优</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/0.70/performance">性能综述</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/0.70/build-speed">优化编译速度</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/0.70/optimizing-flatlist-configuration">列表配置优化</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/0.70/ram-bundles-inline-requires">RAM Bundles 和内联引用优化</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/0.70/profiling">Profiling</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/0.70/profile-hermes">Profiling with Hermes</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/0.70/javascript-environment">JavaScript 运行环境</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/0.70/native-modules-intro">原生模块</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/0.70/native-components-android">原生 UI 组件</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/0.70/the-new-architecture/landing-page">新架构介绍</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/0.70/new-architecture-intro">新架构迁移指南</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/0.70/headless-js-android">Android 与 iOS 指南</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_a9sJ"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_Qr34"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>此为 <!-- -->React Native 中文网<!-- --> <b>0.70</b> 版的文档，现已不再积极维护。</div><div class="margin-top--md">最新的文档请参阅 <b><a href="/docs/build-speed">最新版本</a></b> (<!-- -->0.74<!-- -->)。</div></div><div class="docItemContainer_tjFy"><article><a href="https://time.geekbang.org/column/intro/100110101?code=FAqHFVRUur%2FgAP-yJQWitk9ieF80imRky3PVsIs%2FX6A%3D" target="_blank" style="display:block;padding:12px;background-color:#eee;color:#666;margin-bottom:15px"><span style="font-weight:bold;color:#05a5d1">新架构实战课</span> <!-- -->实操 + 基建 + 原理全维度包揽，抢先掌握 React Native 新架构精髓<!-- --> <span style="border:solid 1px #666;padding:4px 6px;margin-left:8px;vertical-align:middle">立即查看 &gt;</span></a><span class="theme-doc-version-badge badge badge--secondary">Version: 0.70</span><div class="tocCollapsible_wXna theme-doc-toc-mobile tocMobile_Ojys"><button type="button" class="clean-btn tocCollapsibleButton_iI2p">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>优化编译速度</h1></header><p>Building your React Native app could be <strong>expensive</strong> and take several minutes of developers time.
This can be problematic as your project grows and generally in bigger organizations with multiple React Native developers.</p>
<p>With <a href="/docs/next/new-architecture-app-modules-android">the New React Native Architecture</a>, this problem is becoming more critical
as you might have to compile some native C++ code in your project with the Android NDK in addition to the native code already necessary for the iOS and Android platforms.</p>
<p>To mitigate this performance hit, this page shares some suggestions on how to <strong>improve your build time</strong>.</p>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="build-only-one-abi-during-development-android-only">Build only one ABI during development (Android-only)<a href="#build-only-one-abi-during-development-android-only" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h2>
<p>When building your android app locally, by default you build all the 4 <a href="https://developer.android.com/ndk/guides/abis" target="_blank" rel="noopener noreferrer">Application Binary Interfaces (ABIs)</a> : <code>armeabi-v7a</code>, <code>arm64-v8a</code>, <code>x86</code> &amp; <code>x86_64</code>.</p>
<p>However, you probably don&#x27;t need to build all of them if you&#x27;re building locally and testing your emulator or on a physical device.</p>
<p>This should reduce your build time by a <strong>~75% factor</strong>.</p>
<p>If you&#x27;re using the React Native CLI, you can use the <code>--active-arch-only</code> flag together with the <code>run-android</code> command.
This flag will make sure the correct ABI is picked up from either the running emulator or the plugged in phone.
To confirm that this approach is working fine, you&#x27;ll see a message like <code>info Detected architectures arm64-v8a</code> on console.</p>
<div class="language-jsx codeBlockContainer_mQmQ theme-code-block" style="--prism-color:#FFFFFF;--prism-background-color:#282C34"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-jsx codeBlock_RMoD thin-scrollbar" style="color:#FFFFFF;background-color:#282C34"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#FFFFFF"><span class="token plain">$ yarn react</span><span class="token operator" style="color:#fc929e">-</span><span class="token plain">native run</span><span class="token operator" style="color:#fc929e">-</span><span class="token plain">android </span><span class="token operator" style="color:#fc929e">--</span><span class="token plain">active</span><span class="token operator" style="color:#fc929e">-</span><span class="token plain">arch</span><span class="token operator" style="color:#fc929e">-</span><span class="token plain">only</span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token punctuation" style="color:#657b83">[</span><span class="token plain"> </span><span class="token spread operator" style="color:#fc929e">...</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">info </span><span class="token maybe-class-name">Running</span><span class="token plain"> jetifier to migrate libraries to </span><span class="token maybe-class-name">AndroidX</span><span class="token punctuation" style="color:#657b83">.</span><span class="token plain"> </span><span class="token property-access maybe-class-name">You</span><span class="token plain"> can disable it using </span><span class="token string" style="color:#8dc891">&quot;--no-jetifier&quot;</span><span class="token plain"> flag</span><span class="token punctuation" style="color:#657b83">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token property-access maybe-class-name">Jetifier</span><span class="token plain"> found </span><span class="token number" style="color:#5a9bcf">1037</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">file</span><span class="token punctuation" style="color:#657b83">(</span><span class="token plain">s</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"> to forward</span><span class="token operator" style="color:#fc929e">-</span><span class="token plain">jetify</span><span class="token punctuation" style="color:#657b83">.</span><span class="token plain"> </span><span class="token property-access maybe-class-name">Using</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">32</span><span class="token plain"> workers</span><span class="token spread operator" style="color:#fc929e">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">info </span><span class="token constant" style="color:#5a9bcf">JS</span><span class="token plain"> server already running</span><span class="token punctuation" style="color:#657b83">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token property-access">info</span><span class="token plain"> </span><span class="token maybe-class-name">Detected</span><span class="token plain"> architectures arm64</span><span class="token operator" style="color:#fc929e">-</span><span class="token plain">v8a</span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">info </span><span class="token maybe-class-name">Installing</span><span class="token plain"> the app</span><span class="token spread operator" style="color:#fc929e">...</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This mechanism relies on the <code>reactNativeArchitectures</code> Gradle property.</p>
<p>Therefore, if you&#x27;re building directly with Gradle from the command line and without the CLI, you can specify the ABI you want to build as follows:</p>
<div class="language-jsx codeBlockContainer_mQmQ theme-code-block" style="--prism-color:#FFFFFF;--prism-background-color:#282C34"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-jsx codeBlock_RMoD thin-scrollbar" style="color:#FFFFFF;background-color:#282C34"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#FFFFFF"><span class="token plain">$ </span><span class="token punctuation" style="color:#657b83">.</span><span class="token operator" style="color:#fc929e">/</span><span class="token plain">gradlew </span><span class="token operator" style="color:#fc929e">:</span><span class="token plain">app</span><span class="token operator" style="color:#fc929e">:</span><span class="token plain">assembleDebug </span><span class="token operator" style="color:#fc929e">-</span><span class="token maybe-class-name">PreactNativeArchitectures</span><span class="token operator" style="color:#fc929e">=</span><span class="token plain">x86</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain">x86_64</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This can be useful if you wish to build your Android App on a CI and use a matrix to parallelize the build of the different architectures.</p>
<p>If you wish, you can also override this value locally, using the <code>gradle.properties</code> file you have in the <a href="https://github.com/facebook/react-native/blob/19cf70266eb8ca151aa0cc46ac4c09cb987b2ceb/template/android/gradle.properties#L30-L33" target="_blank" rel="noopener noreferrer">top-level folder</a> of your project:</p>
<div class="language-jsx codeBlockContainer_mQmQ theme-code-block" style="--prism-color:#FFFFFF;--prism-background-color:#282C34"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-jsx codeBlock_RMoD thin-scrollbar" style="color:#FFFFFF;background-color:#282C34"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#FFFFFF"><span class="token plain"># </span><span class="token maybe-class-name">Use</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">this</span><span class="token plain"> property to specify which architecture you want to build</span><span class="token punctuation" style="color:#657b83">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"># </span><span class="token maybe-class-name">You</span><span class="token plain"> can also override it </span><span class="token keyword module" style="color:#c5a5c5">from</span><span class="token plain"> the </span><span class="token constant" style="color:#5a9bcf">CLI</span><span class="token plain"> using</span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"># </span><span class="token punctuation" style="color:#657b83">.</span><span class="token operator" style="color:#fc929e">/</span><span class="token plain">gradlew </span><span class="token tag punctuation" style="color:#657b83">&lt;</span><span class="token tag" style="color:#fc929e">task</span><span class="token tag punctuation" style="color:#657b83">&gt;</span><span class="token plain-text"> -PreactNativeArchitectures=x86_64</span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain-text">reactNativeArchitectures=armeabi-v7a,arm64-v8a,x86,x86_64</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Once you build a <strong>release version</strong> of your app, don&#x27;t forget to remove those flags as you want to build an apk/app bundle that works for all the ABIs and not only for the one you&#x27;re using in your daily development workflow.</p>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="use-a-compiler-cache">Use a compiler cache<a href="#use-a-compiler-cache" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h2>
<p>If you&#x27;re running frequent native builds (either C++ or Objective-C), you might benefit from using a <strong>compiler cache</strong>.</p>
<p>Specifically you can use two type of caches: local compiler caches and distributed compiler caches.</p>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="local-caches">Local caches<a href="#local-caches" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3>
<div class="theme-admonition theme-admonition-info admonition_WCGJ alert alert--info"><div class="admonitionHeading_GCBg"><span class="admonitionIcon_L39b"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_pbrs"><p>The following instructions will work for <strong>both Android &amp; iOS</strong>.
If you&#x27;re building only Android apps, you should be good to go.
If you&#x27;re building also iOS apps, please follow the instructions in the <a href="#xcode-specific-setup">XCode Specific Setup</a> section below.</p></div></div>
<p>We suggest to use <a href="https://ccache.dev/" target="_blank" rel="noopener noreferrer"><strong>ccache</strong></a> to cache the compilation of your native builds.
Ccache works by wrapping the C++ compilers, storing the compilation results, and skipping the compilation
if an intermediate compilation result was originally stored.</p>
<p>To install it, you can follow the <a href="https://github.com/ccache/ccache/blob/master/doc/INSTALL.md" target="_blank" rel="noopener noreferrer">official installation instructions</a>.</p>
<p>On Mac OS, we can install ccache with <code>brew install ccache</code>.
Once installed you can configure it as follows to cache NDK compile results:</p>
<div class="language-jsx codeBlockContainer_mQmQ theme-code-block" style="--prism-color:#FFFFFF;--prism-background-color:#282C34"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-jsx codeBlock_RMoD thin-scrollbar" style="color:#FFFFFF;background-color:#282C34"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#FFFFFF"><span class="token plain">ln </span><span class="token operator" style="color:#fc929e">-</span><span class="token plain">s ccache </span><span class="token operator" style="color:#fc929e">/</span><span class="token plain">usr</span><span class="token operator" style="color:#fc929e">/</span><span class="token plain">local</span><span class="token operator" style="color:#fc929e">/</span><span class="token plain">bin</span><span class="token operator" style="color:#fc929e">/</span><span class="token plain">gcc</span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">ln </span><span class="token operator" style="color:#fc929e">-</span><span class="token plain">s ccache </span><span class="token operator" style="color:#fc929e">/</span><span class="token plain">usr</span><span class="token operator" style="color:#fc929e">/</span><span class="token plain">local</span><span class="token operator" style="color:#fc929e">/</span><span class="token plain">bin</span><span class="token operator" style="color:#fc929e">/</span><span class="token plain">g</span><span class="token operator" style="color:#fc929e">++</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">ln </span><span class="token operator" style="color:#fc929e">-</span><span class="token plain">s ccache </span><span class="token operator" style="color:#fc929e">/</span><span class="token plain">usr</span><span class="token operator" style="color:#fc929e">/</span><span class="token plain">local</span><span class="token operator" style="color:#fc929e">/</span><span class="token plain">bin</span><span class="token operator" style="color:#fc929e">/</span><span class="token plain">cc</span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">ln </span><span class="token operator" style="color:#fc929e">-</span><span class="token plain">s ccache </span><span class="token operator" style="color:#fc929e">/</span><span class="token plain">usr</span><span class="token operator" style="color:#fc929e">/</span><span class="token plain">local</span><span class="token operator" style="color:#fc929e">/</span><span class="token plain">bin</span><span class="token operator" style="color:#fc929e">/</span><span class="token plain">c</span><span class="token operator" style="color:#fc929e">++</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">ln </span><span class="token operator" style="color:#fc929e">-</span><span class="token plain">s ccache </span><span class="token operator" style="color:#fc929e">/</span><span class="token plain">usr</span><span class="token operator" style="color:#fc929e">/</span><span class="token plain">local</span><span class="token operator" style="color:#fc929e">/</span><span class="token plain">bin</span><span class="token operator" style="color:#fc929e">/</span><span class="token plain">clang</span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">ln </span><span class="token operator" style="color:#fc929e">-</span><span class="token plain">s ccache </span><span class="token operator" style="color:#fc929e">/</span><span class="token plain">usr</span><span class="token operator" style="color:#fc929e">/</span><span class="token plain">local</span><span class="token operator" style="color:#fc929e">/</span><span class="token plain">bin</span><span class="token operator" style="color:#fc929e">/</span><span class="token plain">clang</span><span class="token operator" style="color:#fc929e">++</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This will create symbolic links to <code>ccache</code> inside the <code>/usr/local/bin/</code> which are called <code>gcc</code>, <code>g++</code>, and so on.</p>
<p>This works as long as <code>/usr/local/bin/</code> comes first than <code>/usr/bin/</code> inside your <code>$PATH</code> variable, which is the default.</p>
<p>You can verify that it works using the <code>which</code> command:</p>
<div class="language-jsx codeBlockContainer_mQmQ theme-code-block" style="--prism-color:#FFFFFF;--prism-background-color:#282C34"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-jsx codeBlock_RMoD thin-scrollbar" style="color:#FFFFFF;background-color:#282C34"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#FFFFFF"><span class="token plain">$ which gcc</span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token operator" style="color:#fc929e">/</span><span class="token plain">usr</span><span class="token operator" style="color:#fc929e">/</span><span class="token plain">local</span><span class="token operator" style="color:#fc929e">/</span><span class="token plain">bin</span><span class="token operator" style="color:#fc929e">/</span><span class="token plain">gcc</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>If the results is <code>/usr/local/bin/gcc</code>, then you&#x27;re effectively calling <code>ccache</code> which will wrap the <code>gcc</code> calls.</p>
<div class="theme-admonition theme-admonition-caution admonition_WCGJ alert alert--warning"><div class="admonitionHeading_GCBg"><span class="admonitionIcon_L39b"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_pbrs"><p>Please note that this setup of <code>ccache</code> will affect all the compilations that you&#x27;re running on your machine, not only those related to React Native. Use it at your own risk. If you&#x27;re failing to install/compile other software, this might be the reason. If that is the case, you can remove the symlink you created with:</p><div class="language-jsx codeBlockContainer_mQmQ theme-code-block" style="--prism-color:#FFFFFF;--prism-background-color:#282C34"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-jsx codeBlock_RMoD thin-scrollbar" style="color:#FFFFFF;background-color:#282C34"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#FFFFFF"><span class="token plain">unlink </span><span class="token operator" style="color:#fc929e">/</span><span class="token plain">usr</span><span class="token operator" style="color:#fc929e">/</span><span class="token plain">local</span><span class="token operator" style="color:#fc929e">/</span><span class="token plain">bin</span><span class="token operator" style="color:#fc929e">/</span><span class="token plain">gcc</span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">unlink </span><span class="token operator" style="color:#fc929e">/</span><span class="token plain">usr</span><span class="token operator" style="color:#fc929e">/</span><span class="token plain">local</span><span class="token operator" style="color:#fc929e">/</span><span class="token plain">bin</span><span class="token operator" style="color:#fc929e">/</span><span class="token plain">g</span><span class="token operator" style="color:#fc929e">++</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">unlink </span><span class="token operator" style="color:#fc929e">/</span><span class="token plain">usr</span><span class="token operator" style="color:#fc929e">/</span><span class="token plain">local</span><span class="token operator" style="color:#fc929e">/</span><span class="token plain">bin</span><span class="token operator" style="color:#fc929e">/</span><span class="token plain">cc</span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">unlink </span><span class="token operator" style="color:#fc929e">/</span><span class="token plain">usr</span><span class="token operator" style="color:#fc929e">/</span><span class="token plain">local</span><span class="token operator" style="color:#fc929e">/</span><span class="token plain">bin</span><span class="token operator" style="color:#fc929e">/</span><span class="token plain">c</span><span class="token operator" style="color:#fc929e">++</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">unlink </span><span class="token operator" style="color:#fc929e">/</span><span class="token plain">usr</span><span class="token operator" style="color:#fc929e">/</span><span class="token plain">local</span><span class="token operator" style="color:#fc929e">/</span><span class="token plain">bin</span><span class="token operator" style="color:#fc929e">/</span><span class="token plain">clang</span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">unlink </span><span class="token operator" style="color:#fc929e">/</span><span class="token plain">usr</span><span class="token operator" style="color:#fc929e">/</span><span class="token plain">local</span><span class="token operator" style="color:#fc929e">/</span><span class="token plain">bin</span><span class="token operator" style="color:#fc929e">/</span><span class="token plain">clang</span><span class="token operator" style="color:#fc929e">++</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>to revert your machine to the original status and use the default compilers.</p></div></div>
<p>You can then do two clean builds (e.g. on Android you can first run <code>yarn react-native run-android</code>, delete the <code>android/app/build</code> folder and run the first command once more). You will notice that the second build was way faster than the first one (it should take seconds rather than minutes).
While building, you can verify that <code>ccache</code> works correctly and check the cache hits/miss rate <code>ccache -s</code></p>
<div class="language-jsx codeBlockContainer_mQmQ theme-code-block" style="--prism-color:#FFFFFF;--prism-background-color:#282C34"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-jsx codeBlock_RMoD thin-scrollbar" style="color:#FFFFFF;background-color:#282C34"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#FFFFFF"><span class="token plain">$ ccache </span><span class="token operator" style="color:#fc929e">-</span><span class="token plain">s</span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token literal-property property" style="color:#2aa198">Summary</span><span class="token operator" style="color:#fc929e">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">  </span><span class="token literal-property property" style="color:#2aa198">Hits</span><span class="token operator" style="color:#fc929e">:</span><span class="token plain">             </span><span class="token number" style="color:#5a9bcf">196</span><span class="token plain"> </span><span class="token operator" style="color:#fc929e">/</span><span class="token plain">  </span><span class="token number" style="color:#5a9bcf">3068</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">(</span><span class="token number" style="color:#5a9bcf">6.39</span><span class="token plain"> </span><span class="token operator" style="color:#fc929e">%</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    </span><span class="token literal-property property" style="color:#2aa198">Direct</span><span class="token operator" style="color:#fc929e">:</span><span class="token plain">           </span><span class="token number" style="color:#5a9bcf">0</span><span class="token plain"> </span><span class="token operator" style="color:#fc929e">/</span><span class="token plain">  </span><span class="token number" style="color:#5a9bcf">3068</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">(</span><span class="token number" style="color:#5a9bcf">0.00</span><span class="token plain"> </span><span class="token operator" style="color:#fc929e">%</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    </span><span class="token literal-property property" style="color:#2aa198">Preprocessed</span><span class="token operator" style="color:#fc929e">:</span><span class="token plain">   </span><span class="token number" style="color:#5a9bcf">196</span><span class="token plain"> </span><span class="token operator" style="color:#fc929e">/</span><span class="token plain">  </span><span class="token number" style="color:#5a9bcf">3068</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">(</span><span class="token number" style="color:#5a9bcf">6.39</span><span class="token plain"> </span><span class="token operator" style="color:#fc929e">%</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">  </span><span class="token literal-property property" style="color:#2aa198">Misses</span><span class="token operator" style="color:#fc929e">:</span><span class="token plain">          </span><span class="token number" style="color:#5a9bcf">2872</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    </span><span class="token literal-property property" style="color:#2aa198">Direct</span><span class="token operator" style="color:#fc929e">:</span><span class="token plain">        </span><span class="token number" style="color:#5a9bcf">3068</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    </span><span class="token literal-property property" style="color:#2aa198">Preprocessed</span><span class="token operator" style="color:#fc929e">:</span><span class="token plain">  </span><span class="token number" style="color:#5a9bcf">2872</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">  </span><span class="token literal-property property" style="color:#2aa198">Uncacheable</span><span class="token operator" style="color:#fc929e">:</span><span class="token plain">        </span><span class="token number" style="color:#5a9bcf">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token maybe-class-name">Primary</span><span class="token plain"> storage</span><span class="token operator" style="color:#fc929e">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">  </span><span class="token literal-property property" style="color:#2aa198">Hits</span><span class="token operator" style="color:#fc929e">:</span><span class="token plain">             </span><span class="token number" style="color:#5a9bcf">196</span><span class="token plain"> </span><span class="token operator" style="color:#fc929e">/</span><span class="token plain">  </span><span class="token number" style="color:#5a9bcf">6136</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">(</span><span class="token number" style="color:#5a9bcf">3.19</span><span class="token plain"> </span><span class="token operator" style="color:#fc929e">%</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">  </span><span class="token literal-property property" style="color:#2aa198">Misses</span><span class="token operator" style="color:#fc929e">:</span><span class="token plain">          </span><span class="token number" style="color:#5a9bcf">5940</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">  </span><span class="token maybe-class-name">Cache</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">size</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">(</span><span class="token constant" style="color:#5a9bcf">GB</span><span class="token punctuation" style="color:#657b83">)</span><span class="token operator" style="color:#fc929e">:</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">0.60</span><span class="token plain"> </span><span class="token operator" style="color:#fc929e">/</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">20.00</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">(</span><span class="token number" style="color:#5a9bcf">3.00</span><span class="token plain"> </span><span class="token operator" style="color:#fc929e">%</span><span class="token punctuation" style="color:#657b83">)</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Note that <code>ccache</code> aggregates the stats over all builds. You can use <code>ccache --zero-stats</code> to reset them before a build to verify the cache-hit ratio.</p>
<p>Should you need to wipe your cache, you can do so with <code>ccache --clear</code></p>
<h4 class="anchor anchorWithStickyNavbar_JmGV" id="xcode-specific-setup">XCode Specific Setup<a href="#xcode-specific-setup" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h4>
<p>To make sure <code>ccache</code> works correctly with iOS and XCode, you need to follow a couple of extra steps:</p>
<ol>
<li>You must alter the way Xcode and <code>xcodebuild</code> call for the compiler command. By default they use <em>fully specified paths</em> to the compiler binaries, so the symbolic links installed in <code>/usr/local/bin</code> will not be used. You may configure Xcode to use <em>relative</em> names for the compilers using either of these two options:</li>
</ol>
<ul>
<li>environment variables prefixed on the command line if you use a direct command line: <code>CLANG=clang CLANGPLUSPLUS=clang++ LD=clang LDPLUSPLUS=clang++ xcodebuild &lt;rest of xcodebuild command line&gt;</code></li>
<li>A <code>post_install</code> section in your <code>ios/Podfile</code> that alters the compiler in your Xcode workspace during the <code>pod install</code> step:</li>
</ul>
<div class="language-ruby codeBlockContainer_mQmQ theme-code-block" style="--prism-color:#FFFFFF;--prism-background-color:#282C34"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-ruby codeBlock_RMoD thin-scrollbar" style="color:#FFFFFF;background-color:#282C34"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#FFFFFF"><span class="token plain">  post_install </span><span class="token keyword" style="color:#c5a5c5">do</span><span class="token plain"> </span><span class="token operator" style="color:#fc929e">|</span><span class="token plain">installer</span><span class="token operator" style="color:#fc929e">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    react_native_post_install</span><span class="token punctuation" style="color:#657b83">(</span><span class="token plain">installer</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    </span><span class="token comment" style="color:#93a1a1"># ...possibly other post_install items here</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    installer</span><span class="token punctuation" style="color:#657b83">.</span><span class="token plain">pods_project</span><span class="token punctuation" style="color:#657b83">.</span><span class="token plain">targets</span><span class="token punctuation" style="color:#657b83">.</span><span class="token keyword" style="color:#c5a5c5">each</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">do</span><span class="token plain"> </span><span class="token operator" style="color:#fc929e">|</span><span class="token plain">target</span><span class="token operator" style="color:#fc929e">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">      target</span><span class="token punctuation" style="color:#657b83">.</span><span class="token plain">build_configurations</span><span class="token punctuation" style="color:#657b83">.</span><span class="token keyword" style="color:#c5a5c5">each</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">do</span><span class="token plain"> </span><span class="token operator" style="color:#fc929e">|</span><span class="token plain">config</span><span class="token operator" style="color:#fc929e">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">        </span><span class="token comment" style="color:#93a1a1"># Using the un-qualified names means you can swap in different implementations, for example ccache</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">        config</span><span class="token punctuation" style="color:#657b83">.</span><span class="token plain">build_settings</span><span class="token punctuation" style="color:#657b83">[</span><span class="token string-literal string" style="color:#8dc891">&quot;CC&quot;</span><span class="token punctuation" style="color:#657b83">]</span><span class="token plain"> </span><span class="token operator" style="color:#fc929e">=</span><span class="token plain"> </span><span class="token string-literal string" style="color:#8dc891">&quot;clang&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">        config</span><span class="token punctuation" style="color:#657b83">.</span><span class="token plain">build_settings</span><span class="token punctuation" style="color:#657b83">[</span><span class="token string-literal string" style="color:#8dc891">&quot;LD&quot;</span><span class="token punctuation" style="color:#657b83">]</span><span class="token plain"> </span><span class="token operator" style="color:#fc929e">=</span><span class="token plain"> </span><span class="token string-literal string" style="color:#8dc891">&quot;clang&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">        config</span><span class="token punctuation" style="color:#657b83">.</span><span class="token plain">build_settings</span><span class="token punctuation" style="color:#657b83">[</span><span class="token string-literal string" style="color:#8dc891">&quot;CXX&quot;</span><span class="token punctuation" style="color:#657b83">]</span><span class="token plain"> </span><span class="token operator" style="color:#fc929e">=</span><span class="token plain"> </span><span class="token string-literal string" style="color:#8dc891">&quot;clang++&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">        config</span><span class="token punctuation" style="color:#657b83">.</span><span class="token plain">build_settings</span><span class="token punctuation" style="color:#657b83">[</span><span class="token string-literal string" style="color:#8dc891">&quot;LDPLUSPLUS&quot;</span><span class="token punctuation" style="color:#657b83">]</span><span class="token plain"> </span><span class="token operator" style="color:#fc929e">=</span><span class="token plain"> </span><span class="token string-literal string" style="color:#8dc891">&quot;clang++&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">      </span><span class="token keyword" style="color:#c5a5c5">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    </span><span class="token keyword" style="color:#c5a5c5">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    __apply_Xcode_12_5_M1_post_install_workaround</span><span class="token punctuation" style="color:#657b83">(</span><span class="token plain">installer</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">  </span><span class="token keyword" style="color:#c5a5c5">end</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ol start="2">
<li>You need a ccache configuration that allows for a certain level of sloppiness and cache behavior such that ccache registers cache hits during Xcode compiles. The ccache configuration variables that are different from standard are as follows if configured by environment variable:</li>
</ol>
<div class="language-bash codeBlockContainer_mQmQ theme-code-block" style="--prism-color:#FFFFFF;--prism-background-color:#282C34"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-bash codeBlock_RMoD thin-scrollbar" style="color:#FFFFFF;background-color:#282C34"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#FFFFFF"><span class="token plain">export CCACHE_SLOPPINESS=clang_index_store,file_stat_matches,include_file_ctime,include_file_mtime,ivfsoverlay,pch_defines,modules,system_headers,time_macros</span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">export CCACHE_FILECLONE=true</span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">export CCACHE_DEPEND=true</span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">export CCACHE_INODECACHE=true</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The same may be configured in a <code>ccache.conf</code> file or any other mechanism ccache provides. More on this can be found in the <a href="https://ccache.dev/manual/4.3.html" target="_blank" rel="noopener noreferrer">official ccache manual</a>.</p>
<h4 class="anchor anchorWithStickyNavbar_JmGV" id="using-this-approach-on-a-ci">Using this approach on a CI<a href="#using-this-approach-on-a-ci" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h4>
<p>Ccache uses the <code>/Users/$USER/Library/Caches/ccache</code> folder on macOS to store the cache.
Therefore you could save &amp; restore the corresponding folder also on CI to speedup your builds.</p>
<p>However, there are a couple of things to be aware:</p>
<ol>
<li>
<p>On CI, we recommend to do a full clean build, to avoid poisoned cache problems. If you follow the approach mentioned in the previous paragraph, you should be able to parallelize the native build on 4 different ABIs and you will most likely not need <code>ccache</code> on CI.</p>
</li>
<li>
<p><code>ccache</code> relies on timestamps to compute a cache hit. This doesn&#x27;t work well on CI as files are re-downloaded at every CI run. To overcome this, you&#x27;ll need to use the <code>compiler_check content</code> option which relies instead on <a href="https://ccache.dev/manual/4.3.html" target="_blank" rel="noopener noreferrer">hashing the content of the file</a>.</p>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="distributed-caches">Distributed caches<a href="#distributed-caches" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3>
<p>Similar to local caches, you might want to consider using a distributed cache for your native builds.
This could be specifically useful in bigger organizations that are doing frequent native builds.</p>
<p>We recommend to use <a href="https://github.com/mozilla/sccache" target="_blank" rel="noopener noreferrer">sccache</a> to achieve this.
We defer to the sccache <a href="https://github.com/mozilla/sccache/blob/main/docs/DistributedQuickstart.md" target="_blank" rel="noopener noreferrer">distributed compilation quickstart</a> for instructions on how to setup and use this tool.</p>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="troubleshooting">Troubleshooting<a href="#troubleshooting" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h2>
<p>Please find instructions on how to solve some of the most common build performance issue in this section.</p>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="clean-android-build-with---active-arch-only-is-failing">Clean Android build with <code>--active-arch-only</code> is failing.<a href="#clean-android-build-with---active-arch-only-is-failing" class="hash-link" aria-label="标题的直接链接" title="标题的直接链接">​</a></h3>
<p>If you&#x27;re using the <code>--active-arch-only</code> flag on a clean Android build (e.g. after having cloned a project or after having created a new project) you might experience a build failures as follows:</p>
<div class="language-jsx codeBlockContainer_mQmQ theme-code-block" style="--prism-color:#FFFFFF;--prism-background-color:#282C34"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-jsx codeBlock_RMoD thin-scrollbar" style="color:#FFFFFF;background-color:#282C34"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#FFFFFF"><span class="token maybe-class-name">Android</span><span class="token plain"> </span><span class="token constant" style="color:#5a9bcf">NDK</span><span class="token operator" style="color:#fc929e">:</span><span class="token plain"> </span><span class="token constant" style="color:#5a9bcf">ERROR</span><span class="token operator" style="color:#fc929e">:</span><span class="token operator" style="color:#fc929e">/</span><span class="token spread operator" style="color:#fc929e">...</span><span class="token operator" style="color:#fc929e">/</span><span class="token plain">android</span><span class="token operator" style="color:#fc929e">/</span><span class="token plain">app</span><span class="token operator" style="color:#fc929e">/</span><span class="token plain">src</span><span class="token operator" style="color:#fc929e">/</span><span class="token plain">main</span><span class="token operator" style="color:#fc929e">/</span><span class="token plain">jni</span><span class="token operator" style="color:#fc929e">/</span><span class="token maybe-class-name">Android</span><span class="token punctuation" style="color:#657b83">.</span><span class="token property-access">mk</span><span class="token operator" style="color:#fc929e">:</span><span class="token plain">fb</span><span class="token operator" style="color:#fc929e">:</span><span class="token plain"> </span><span class="token constant" style="color:#5a9bcf">LOCAL_SRC_FILES</span><span class="token plain"> points to a missing file</span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token maybe-class-name">Android</span><span class="token plain"> </span><span class="token constant" style="color:#5a9bcf">NDK</span><span class="token operator" style="color:#fc929e">:</span><span class="token plain"> </span><span class="token maybe-class-name">Check</span><span class="token plain"> that </span><span class="token operator" style="color:#fc929e">/</span><span class="token spread operator" style="color:#fc929e">...</span><span class="token operator" style="color:#fc929e">/</span><span class="token plain">android</span><span class="token operator" style="color:#fc929e">/</span><span class="token plain">app</span><span class="token operator" style="color:#fc929e">/</span><span class="token plain">build</span><span class="token operator" style="color:#fc929e">/</span><span class="token plain">react</span><span class="token operator" style="color:#fc929e">-</span><span class="token plain">ndk</span><span class="token operator" style="color:#fc929e">/</span><span class="token plain">exported</span><span class="token operator" style="color:#fc929e">/</span><span class="token plain">armeabi</span><span class="token operator" style="color:#fc929e">-</span><span class="token plain">v7a</span><span class="token operator" style="color:#fc929e">/</span><span class="token plain">libfb</span><span class="token punctuation" style="color:#657b83">.</span><span class="token property-access">so</span><span class="token plain"> exists or that its path is correct</span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token operator" style="color:#fc929e">/</span><span class="token spread operator" style="color:#fc929e">...</span><span class="token operator" style="color:#fc929e">/</span><span class="token maybe-class-name">Android</span><span class="token operator" style="color:#fc929e">/</span><span class="token plain">sdk</span><span class="token operator" style="color:#fc929e">/</span><span class="token plain">ndk</span><span class="token operator" style="color:#fc929e">/</span><span class="token number" style="color:#5a9bcf">24.0</span><span class="token number" style="color:#5a9bcf">.8079956</span><span class="token operator" style="color:#fc929e">/</span><span class="token plain">build</span><span class="token operator" style="color:#fc929e">/</span><span class="token plain">core</span><span class="token operator" style="color:#fc929e">/</span><span class="token plain">prebuilt</span><span class="token operator" style="color:#fc929e">-</span><span class="token plain">library</span><span class="token punctuation" style="color:#657b83">.</span><span class="token property-access">mk</span><span class="token operator" style="color:#fc929e">:</span><span class="token number" style="color:#5a9bcf">51</span><span class="token operator" style="color:#fc929e">:</span><span class="token plain"> </span><span class="token operator" style="color:#fc929e">**</span><span class="token operator" style="color:#fc929e">*</span><span class="token plain"> </span><span class="token maybe-class-name">Android</span><span class="token plain"> </span><span class="token constant" style="color:#5a9bcf">NDK</span><span class="token operator" style="color:#fc929e">:</span><span class="token plain"> </span><span class="token maybe-class-name">Aborting</span><span class="token plain">    </span><span class="token punctuation" style="color:#657b83">.</span><span class="token plain">  </span><span class="token property-access maybe-class-name">Stop</span><span class="token punctuation" style="color:#657b83">.</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>To overcome this, you can either:</p>
<ol>
<li>Run a full build before without <code>--active-arch-only</code>. Subsequent builds with <code>--active-arch-only</code> will work correctly.</li>
<li>Add an <code>abiFilter</code> block inside your <code>android/app/build.gradle</code> file <a href="https://github.com/facebook/react-native/commit/5dff920177220ae5f4e37c662c63c27ebf696c83" target="_blank" rel="noopener noreferrer">as follows</a>:</li>
</ol>
<div class="language-diff codeBlockContainer_mQmQ theme-code-block" style="--prism-color:#FFFFFF;--prism-background-color:#282C34"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-diff codeBlock_RMoD thin-scrollbar" style="color:#FFFFFF;background-color:#282C34"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#FFFFFF"><span class="token plain">  android {</span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    defaultConfig {</span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">      // ...</span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">+     if (!enableSeparateBuildPerCPUArchitecture) {</span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">+       ndk {</span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">+         abiFilters (*reactNativeArchitectures())</span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">+       }</span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">+     }</span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">  }</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Projects created with React Native 0.69 and subsequent versions already contain this fix.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/reactnativecn/react-native-website/blob/production/cnwebsite/../cndocs/build-speed.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_bHB7" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>改进此文档</a></div><div class="col lastUpdated_ydrU"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="文档分页导航"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/0.70/performance"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label">性能综述</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/0.70/optimizing-flatlist-configuration"><div class="pagination-nav__sublabel">下一页</div><div class="pagination-nav__label">列表配置优化</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_jeP5 thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#build-only-one-abi-during-development-android-only" class="table-of-contents__link toc-highlight">Build only one ABI during development (Android-only)</a></li><li><a href="#use-a-compiler-cache" class="table-of-contents__link toc-highlight">Use a compiler cache</a><ul><li><a href="#local-caches" class="table-of-contents__link toc-highlight">Local caches</a></li><li><a href="#distributed-caches" class="table-of-contents__link toc-highlight">Distributed caches</a></li></ul></li><li><a href="#troubleshooting" class="table-of-contents__link toc-highlight">Troubleshooting</a><ul><li><a href="#clean-android-build-with---active-arch-only-is-failing" class="table-of-contents__link toc-highlight">Clean Android build with <code>--active-arch-only</code> is failing.</a></li></ul></li></ul><div class="wwads-cn wwads-vertical" data-id="58" style="max-width:227px;margin-top:20px"></div></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">React Native 中文网 © 2024 武汉青罗网络科技有限公司
      <a style="margin-left:10px" href="http://beian.miit.gov.cn/">鄂ICP备20002031号-3</a>
      <img style="width:25px" src="//img.alicdn.com/tfs/TB1..50QpXXXXX7XpXXXXXXXXXX-40-40.png" alt="鄂公网安备 42011202001821号">
      <a href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=42011202001821">鄂公网安备 42011202001821号</a>
      </div></div></div></footer></div>
</body>
</html>